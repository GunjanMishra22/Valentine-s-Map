<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Premium Poster Generator</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Arial,sans-serif;background:#f8f9fa;color:#2c3e50}.header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:30px 20px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.15)}.header h1{font-size:32px;margin-bottom:8px;font-weight:700}.header p{font-size:16px;opacity:.95}.container{max-width:1600px;margin:0 auto;padding:30px 20px}.grid{display:grid;grid-template-columns:380px 1fr;gap:30px}.panel{background:#fff;border-radius:16px;padding:28px;box-shadow:0 2px 12px rgba(0,0,0,.08);margin-bottom:24px}.panel h2{font-size:20px;margin-bottom:20px;color:#2c3e50;font-weight:600;border-bottom:2px solid #e9ecef;padding-bottom:12px}.btn-group{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.btn{padding:14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;transition:all .3s;font-size:13px;text-align:center;font-weight:500}.btn:hover{border-color:#667eea;transform:translateY(-2px);box-shadow:0 4px 8px rgba(102,126,234,.2)}.btn.active{border-color:#667eea;background:linear-gradient(135deg,#667eea15,#764ba215);color:#667eea;font-weight:600}.form-group{margin-bottom:18px}.form-group label{display:block;font-size:14px;font-weight:600;margin-bottom:10px;color:#495057}.form-group input{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;transition:all .3s}.form-group input:focus{outline:0;border-color:#667eea;box-shadow:0 0 0 4px rgba(102,126,234,.1)}.theme-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.export-btn{width:100%;padding:16px;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;margin-bottom:10px;transition:all .3s}.export-btn.primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.export-btn.primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.4)}.export-btn.secondary{background:#6c757d;color:#fff}.canvas-container{background:#fff;border-radius:16px;padding:30px;box-shadow:0 2px 12px rgba(0,0,0,.08);display:flex;justify-content:center;align-items:center}#posterCanvas{max-width:100%;height:auto;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.12)}@media(max-width:1200px){.grid{grid-template-columns:1fr}}</style></head><body><div class="header"><h1>‚ú® Premium Poster Generator</h1><p>Create stunning map, star map, and typography posters</p></div><div class="container"><div class="grid"><div><div class="panel"><h2>üé® Poster Type</h2><div class="btn-group"><button class="btn active"onclick="setPosterType('map')"id="btn-map">üó∫Ô∏è<br>Map</button><button class="btn"onclick="setPosterType('star')"id="btn-star">‚≠ê<br>Stars</button><button class="btn"onclick="setPosterType('text')"id="btn-text">üìù<br>Text</button></div></div><div class="panel"><h2>üìê Shape</h2><div class="btn-group"><button class="btn active"onclick="setShape('full')"id="btn-full">‚¨õ<br>Full</button><button class="btn"onclick="setShape('circle')"id="btn-circle">‚≠ï<br>Circle</button><button class="btn"onclick="setShape('heart')"id="btn-heart">‚ù§Ô∏è<br>Heart</button></div></div><div class="panel"><h2>üìç Location</h2><button class="export-btn primary"onclick="useMyLocation()"id="gpsBtn">üìç Use My GPS</button><div style="text-align:center;margin:16px 0;color:#868e96;font-size:13px">‚Äî OR ‚Äî</div><div class="form-group"><label>Search Location</label><input type="text"id="locationSearch"placeholder="Enter city..."oninput="handleLocationInput()"><div id="locationSuggestions"style="display:none;max-height:240px;overflow-y:auto;border:2px solid #e0e0e0;border-radius:10px;margin-top:10px;background:#fff"></div></div><div id="currentLocationDisplay"style="background:linear-gradient(135deg,#667eea15,#764ba215);padding:16px;border-radius:10px;margin-top:16px;font-size:13px;display:none;border:2px solid #667eea30"><strong style="color:#667eea">Current:</strong><br><span id="locationDisplayText"></span></div><div id="starControls"style="display:none;margin-top:20px"><div class="form-group"><label>üìÖ Date</label><input type="date"id="dateInput"value="2024-01-01"onchange="drawPoster()"></div><div class="form-group"><label>‚è∞ Time</label><input type="time"id="timeInput"value="20:00"onchange="drawPoster()"></div></div><div id="mapControls"style="margin-top:20px"><div class="form-group"><label>üîç Zoom</label><input type="range"id="zoomInput"min="1"max="5"value="3"step="0.5"oninput="updateZoom()"><div style="text-align:center;margin-top:8px;font-size:13px;color:#6c757d">Level: <span id="zoomValue">3.0</span>x</div></div></div></div><div class="panel"><h2>‚úèÔ∏è Text</h2><div class="form-group"><label>Title</label><input type="text"id="titleInput"value="NEW YORK"oninput="drawPoster()"></div><div class="form-group"><label>Subtitle</label><input type="text"id="subtitleInput"value="40.7128¬∞ N, 74.0060¬∞ W"oninput="drawPoster()"></div><div class="form-group"><label>Tagline</label><input type="text"id="messageInput"placeholder="Optional..."oninput="drawPoster()"></div></div><div class="panel"><h2>üé® Theme</h2><div class="theme-grid"><button class="btn active"onclick="setTheme('classic')"id="theme-classic">Classic</button><button class="btn"onclick="setTheme('modern')"id="theme-modern">Modern</button><button class="btn"onclick="setTheme('vintage')"id="theme-vintage">Vintage</button><button class="btn"onclick="setTheme('minimal')"id="theme-minimal">Minimal</button><button class="btn"onclick="setTheme('nightsky')"id="theme-nightsky">Night Sky</button><button class="btn"onclick="setTheme('cyberpunk')"id="theme-cyberpunk">Cyberpunk</button></div></div><div class="panel"><h2>üíæ Export</h2><button class="export-btn primary"onclick="exportPoster('png')">‚¨áÔ∏è Download PNG</button><button class="export-btn secondary"onclick="exportPoster('jpeg')">‚¨áÔ∏è Download JPEG</button></div></div><div><div class="canvas-container"><canvas id="posterCanvas"width="2480"height="3508"></canvas></div></div></div></div><script>const bStars=[{n:'Sirius',ra:6.75,dec:-16.72,mag:-1.46},{n:'Canopus',ra:6.4,dec:-52.7,mag:-.72},{n:'Arcturus',ra:14.26,dec:19.18,mag:-.05},{n:'Vega',ra:18.62,dec:38.78,mag:.03},{n:'Capella',ra:5.28,dec:45.99,mag:.08},{n:'Rigel',ra:5.24,dec:-8.2,mag:.12},{n:'Procyon',ra:7.66,dec:5.23,mag:.38},{n:'Betelgeuse',ra:5.92,dec:7.41,mag:.5},{n:'Altair',ra:19.85,dec:8.87,mag:.77},{n:'Aldebaran',ra:4.6,dec:16.51,mag:.85},{n:'Spica',ra:13.42,dec:-11.16,mag:.98},{n:'Antares',ra:16.49,dec:-26.43,mag:1.06},{n:'Pollux',ra:7.76,dec:28.03,mag:1.14},{n:'Deneb',ra:20.69,dec:45.28,mag:1.25}];const cons=[[0,6],[0,7],[2,10],[3,8],[4,12],[6,7],[8,13]];let state={posterType:'map',theme:'classic',shape:'full',zoom:3,loc:{lat:40.7128,lon:-74.006,name:'New York'},mapData:null};const themes={classic:{bg:'#FFF',shapeBg:'#F5F5F5',st:'#D4D4D4',rd:'#999',hw:'#666',wt:'#B8D4E8',rl:'#888',sbg:'#0B1620',sfg:'#FFF'},modern:{bg:'#F8F9FA',shapeBg:'#E8EAED',st:'#C7D0DA',rd:'#8B95A8',hw:'#4A5568',wt:'#A5C9E8',rl:'#6B7280',sbg:'#0D1B2A',sfg:'#E8F0FF'},vintage:{bg:'#F4E8D8',shapeBg:'#EAE0D0',st:'#D4C4AC',rd:'#A6906E',hw:'#6B5D47',wt:'#B8C8D8',rl:'#8B7355',sbg:'#1A1410',sfg:'#F5E6D3'},minimal:{bg:'#FAFAFA',shapeBg:'#F0F0F0',st:'#E0E0E0',rd:'#B0B0B0',hw:'#707070',wt:'#C8D8E8',rl:'#909090',sbg:'#0A0A0A',sfg:'#FFF'},nightsky:{bg:'#0A1128',shapeBg:'#15203A',st:'#2A3A5C',rd:'#3D5070',hw:'#5C6BC0',wt:'#1A3A5C',rl:'#4A5A7C',sbg:'#050A15',sfg:'#E8F0FF'},cyberpunk:{bg:'#0D0221',shapeBg:'#1A0D35',st:'#2D1B4E',rd:'#4A2D6E',hw:'#0FF',wt:'#1A0D3E',rl:'#F06',sbg:'#000510',sfg:'#0FF'}};let locTimeout;async function fetchMapData(lat,lon){try{const r=state.zoom*.018,b=`${lat-r},${lon-r},${lat+r},${lon+r}`,q=`[out:json][timeout:30];(way["highway"](${b});way["waterway"](${b});way["railway"](${b}););out geom;`,res=await fetch(`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(q)}`),d=await res.json();state.mapData={lat,lon,elements:d.elements.filter(e=>e.geometry&&e.geometry.length>1)};drawPoster()}catch(e){drawPoster()}}function updateZoom(){state.zoom=parseFloat(document.getElementById('zoomInput').value);document.getElementById('zoomValue').textContent=state.zoom.toFixed(1);if(state.loc)fetchMapData(state.loc.lat,state.loc.lon)}function useMyLocation(){const btn=document.getElementById('gpsBtn');if(!btn)return;btn.disabled=!0;btn.textContent='üìç Getting...';if(!navigator.geolocation){alert('GPS not supported');btn.disabled=!1;btn.textContent='üìç Use My GPS';return}navigator.geolocation.getCurrentPosition(function(p){const lat=p.coords.latitude,lon=p.coords.longitude;btn.textContent='‚úÖ Found!';fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r=>r.json()).then(d=>{const n=d.address.city||d.address.town||d.address.village||'Your Location';state.loc={lat,lon,name:n};document.getElementById('locationDisplayText').innerHTML=`<strong>${n}</strong><br>${lat.toFixed(4)}¬∞, ${lon.toFixed(4)}¬∞`;document.getElementById('currentLocationDisplay').style.display='block';document.getElementById('titleInput').value=n.toUpperCase();document.getElementById('subtitleInput').value=`${lat.toFixed(4)}¬∞ ${lat>0?'N':'S'}, ${Math.abs(lon).toFixed(4)}¬∞ ${lon>0?'E':'W'}`;fetchMapData(lat,lon)}).catch(e=>{state.loc={lat,lon,name:'Your Location'};fetchMapData(lat,lon)});setTimeout(()=>{btn.disabled=!1;btn.textContent='üìç Use My GPS'},3e3)},e=>{btn.disabled=!1;btn.textContent='üìç Use My GPS';alert('Location error')},{enableHighAccuracy:!0,timeout:1e4})}async function handleLocationInput(){const q=document.getElementById('locationSearch').value.trim();if(q.length<3){document.getElementById('locationSuggestions').style.display='none';return}clearTimeout(locTimeout);locTimeout=setTimeout(async()=>{try{const r=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(q)}&format=json&limit=6`),res=await r.json();if(res.length>0){const c=document.getElementById('locationSuggestions');c.innerHTML='';c.style.display='block';res.forEach(r=>{const d=document.createElement('div');d.style.padding='14px';d.style.cursor='pointer';d.style.borderBottom='1px solid #f0f0f0';d.style.fontSize='13px';d.textContent=r.display_name;d.onmouseover=()=>d.style.background='#f8f9fa';d.onmouseout=()=>d.style.background='white';d.onclick=()=>{state.loc={lat:parseFloat(r.lat),lon:parseFloat(r.lon),name:r.display_name.split(',')[0]};document.getElementById('locationSearch').value=r.display_name;c.style.display='none';document.getElementById('locationDisplayText').innerHTML=`<strong>${state.loc.name}</strong><br>${state.loc.lat.toFixed(4)}¬∞, ${state.loc.lon.toFixed(4)}¬∞`;document.getElementById('currentLocationDisplay').style.display='block';document.getElementById('titleInput').value=state.loc.name.toUpperCase();document.getElementById('subtitleInput').value=`${state.loc.lat.toFixed(4)}¬∞, ${state.loc.lon.toFixed(4)}¬∞`;fetchMapData(state.loc.lat,state.loc.lon)};c.appendChild(d)})}}catch(e){}},400)}function setPosterType(t){state.posterType=t;document.querySelectorAll('.btn-group .btn').forEach(b=>b.classList.remove('active'));document.getElementById(`btn-${t}`).classList.add('active');document.getElementById('starControls').style.display=t==='star'?'block':'none';document.getElementById('mapControls').style.display=t==='map'?'block':'none';drawPoster()}function setShape(s){state.shape=s;document.querySelectorAll('#btn-full,#btn-circle,#btn-heart').forEach(b=>b.classList.remove('active'));document.getElementById(`btn-${s}`).classList.add('active');drawPoster()}function setTheme(t){state.theme=t;document.querySelectorAll('.theme-grid .btn').forEach(b=>b.classList.remove('active'));document.getElementById(`theme-${t}`).classList.add('active');drawPoster()}function drawPoster(){const c=document.getElementById('posterCanvas'),ctx=c.getContext('2d'),w=c.width,h=c.height,col=themes[state.theme];ctx.fillStyle=col.bg;ctx.fillRect(0,0,w,h);if(state.posterType==='map')drawMapPoster(ctx,w,h,col);else if(state.posterType==='star')drawStarPoster(ctx,w,h,col);else drawTypoPoster(ctx,w,h,col)}function createMask(ctx,w,h){const cx=w/2,cy=h*.4,sz=Math.min(w,h*.6)*.42;if(state.shape==='circle'){ctx.beginPath();ctx.arc(cx,cy,sz,0,Math.PI*2);ctx.closePath()}else if(state.shape==='heart'){ctx.beginPath();const ty=cy-sz*.3;ctx.moveTo(cx,ty+sz*.3);for(let a=Math.PI;a<Math.PI*2;a+=.01)ctx.lineTo(cx-sz*.5*Math.sin(a),ty-sz*.5*Math.cos(a));ctx.lineTo(cx,ty+sz);for(let a=0;a<Math.PI;a+=.01)ctx.lineTo(cx+sz*.5*Math.sin(a),ty-sz*.5*Math.cos(a));ctx.closePath()}}function drawMapPoster(ctx,w,h,col){const cx=w/2,cy=h*.4;if(state.shape!=='full'){ctx.fillStyle=col.shapeBg;createMask(ctx,w,h);ctx.fill()}ctx.save();if(state.shape!=='full'){createMask(ctx,w,h);ctx.clip()}if(state.mapData&&state.mapData.elements.length>0){const loc=state.loc,ms=12e4*state.zoom;ctx.translate(cx,cy);[{tag:'waterway',color:col.wt,width:2.5},{tag:'railway',color:col.rl,width:1.8},{tag:'highway',types:['residential','unclassified','service'],color:col.st,width:1.2},{tag:'highway',types:['tertiary','secondary','primary'],color:col.rd,width:2},{tag:'highway',types:['trunk','motorway'],color:col.hw,width:3}].forEach(layer=>{state.mapData.elements.forEach(e=>{if(!e.geometry||e.geometry.length<2||!e.tags)return;if(layer.tag==='highway'&&e.tags.highway){if(layer.types&&!layer.types.includes(e.tags.highway))return;ctx.strokeStyle=layer.color;ctx.lineWidth=layer.width;ctx.lineCap='round';ctx.lineJoin='round';ctx.beginPath();e.geometry.forEach((c,i)=>{const x=(c.lon-loc.lon)*ms*Math.cos(loc.lat*Math.PI/180),y=-(c.lat-loc.lat)*ms;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.stroke()}else if(e.tags[layer.tag]){ctx.strokeStyle=layer.color;ctx.lineWidth=layer.width;ctx.lineCap='round';ctx.lineJoin='round';if(layer.tag==='waterway')ctx.globalAlpha=.7;ctx.beginPath();e.geometry.forEach((c,i)=>{const x=(c.lon-loc.lon)*ms*Math.cos(loc.lat*Math.PI/180),y=-(c.lat-loc.lat)*ms;i===0?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.stroke();ctx.globalAlpha=1}})});const g=ctx.createRadialGradient(0,0,10,0,0,35);g.addColorStop(0,'#FFF');g.addColorStop(.5,col.hw);g.addColorStop(1,state.shape==='full'?col.bg:col.shapeBg);ctx.fillStyle=g;ctx.beginPath();ctx.arc(0,0,35,0,Math.PI*2);ctx.fill();ctx.fillStyle=col.hw;ctx.beginPath();ctx.arc(0,0,15,0,Math.PI*2);ctx.fill()}else{ctx.fillStyle=col.hw;ctx.textAlign='center';ctx.font='bold 38px Arial';ctx.fillText('Loading...',cx,cy)}ctx.restore();drawLabels(ctx,w,h,col)}function drawStarPoster(ctx,w,h,col){const loc=state.loc,date=new Date(`${document.getElementById('dateInput').value}T${document.getElementById('timeInput').value}:00`),cx=w/2,cy=h*.4;if(state.shape!=='full'){ctx.fillStyle=col.shapeBg;createMask(ctx,w,h);ctx.fill()}ctx.save();if(state.shape!=='full'){createMask(ctx,w,h);ctx.clip()}const g=ctx.createRadialGradient(cx,cy*.6,0,cx,cy*.6,h*.4);g.addColorStop(0,'rgba(20,30,60,1)');g.addColorStop(.5,col.sbg);g.addColorStop(1,col.sbg);ctx.fillStyle=g;ctx.fillRect(0,0,w,h);const skyW=state.shape==='full'?w:w*.85,skyH=state.shape==='full'?h*.65:h*.5;for(let i=0;i<3500;i++){const x=cx+(Math.random()-.5)*skyW,y=cy*.5+(Math.random()-.5)*skyH,tier=Math.random();let sz,alpha;if(tier<.02){sz=1.2+Math.random()*.8;alpha=.95}else if(tier<.08){sz=.8+Math.random()*.6;alpha=.8}else if(tier<.2){sz=.5+Math.random()*.5;alpha=.6}else{sz=.3+Math.random()*.4;alpha=.35}const tw=.85+Math.sin(Date.now()*.002+i)*.15;ctx.fillStyle=`rgba(255,255,255,${alpha*tw})`;ctx.beginPath();ctx.arc(x,y,sz,0,Math.PI*2);ctx.fill();if(tier<.015){ctx.fillStyle=`rgba(255,255,255,${alpha*.3})`;ctx.beginPath();ctx.arc(x,y,sz*3,0,Math.PI*2);ctx.fill()}}const stars=calcStars(loc.lat,loc.lon,date,w,h);const vis=stars.filter(s=>s.x>=cx-skyW/2&&s.x<=cx+skyW/2&&s.y>=cy*.5-skyH/2&&s.y<=cy*.5+skyH/2);cons.forEach(pair=>{const s1=stars[pair[0]],s2=stars[pair[1]];if(s1&&s2&&vis.includes(s1)&&vis.includes(s2)){ctx.strokeStyle='rgba(180,200,255,0.25)';ctx.lineWidth=1.5;ctx.beginPath();ctx.moveTo(s1.x,s1.y);ctx.lineTo(s2.x,s2.y);ctx.stroke()}});stars.forEach(s=>{if(s.x>=cx-skyW/2&&s.x<=cx+skyW/2&&s.y>=cy*.5-skyH/2&&s.y<=cy*.5+skyH/2){const sz=Math.max(4,12-s.mag*3);const halo=sz*5;const g=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,halo);g.addColorStop(0,'rgba(255,255,255,1)');g.addColorStop(.15,'rgba(240,250,255,0.8)');g.addColorStop(.4,'rgba(200,220,255,0.3)');g.addColorStop(1,'rgba(180,200,240,0)');ctx.fillStyle=g;ctx.beginPath();ctx.arc(s.x,s.y,halo,0,Math.PI*2);ctx.fill();ctx.fillStyle='#FFF';ctx.shadowBlur=6;ctx.shadowColor='rgba(255,255,255,0.9)';ctx.beginPath();ctx.arc(s.x,s.y,sz,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;if(s.mag<.5&&s.n){ctx.fillStyle=col.sfg;ctx.font='bold 24px Arial';ctx.textAlign='center';ctx.shadowBlur=3;ctx.shadowColor='rgba(0,0,0,0.7)';ctx.fillText(s.n,s.x,s.y-halo-5);ctx.shadowBlur=0}}});ctx.restore();drawLabels(ctx,w,h,col)}function calcStars(lat,lon,date,cw,ch){const jd=date.getTime()/864e5+2440587.5;let theta=280.46061837+360.98564736629*(jd-2451545);theta=theta%360;if(theta<0)theta+=360;const lst=(theta+lon)%360/15,pos=[];bStars.forEach(s=>{const ha=lst-s.ra,har=ha*15*Math.PI/180,decr=s.dec*Math.PI/180,latr=lat*Math.PI/180,sinAlt=Math.sin(decr)*Math.sin(latr)+Math.cos(decr)*Math.cos(latr)*Math.cos(har),alt=Math.asin(sinAlt)*180/Math.PI;if(alt>-5){const altr=alt*Math.PI/180,cosAz=(Math.sin(decr)-Math.sin(altr)*Math.sin(latr))/(Math.cos(altr)*Math.cos(latr));let az=Math.acos(Math.max(-1,Math.min(1,cosAz)))*180/Math.PI;if(Math.sin(har)>0)az=360-az;const ps=ch*.25,r=ps*(90-alt)/90,th=az*Math.PI/180;pos.push({x:cw/2+r*Math.sin(th),y:ch*.4-r*Math.cos(th),mag:s.mag,n:s.n})}});return pos}function drawTypoPoster(ctx,w,h,col){const title=document.getElementById('titleInput').value,subtitle=document.getElementById('subtitleInput').value;ctx.strokeStyle=col.hw;ctx.lineWidth=2.5;for(let i=0;i<9;i++){const offs=i*90;ctx.strokeRect(100+offs,100+offs,w-200-offs*2,h-200-offs*2)}ctx.font='bold 180px Arial';ctx.textAlign='center';ctx.textBaseline='middle';const tw=ctx.measureText(title).width;ctx.fillStyle=col.hw+'15';ctx.fillRect(w/2-tw/2-50,h/2-140,tw+100,200);ctx.fillStyle=col.hw;ctx.fillText(title,w/2,h/2-80);ctx.font='60px Arial';const sw=ctx.measureText(subtitle).width;ctx.fillStyle=col.hw+'15';ctx.fillRect(w/2-sw/2-40,h/2+40,sw+80,100);ctx.fillStyle=col.rd;ctx.fillText(subtitle,w/2,h/2+90);drawLabels(ctx,w,h,col)}function drawLabels(ctx,w,h,col){const title=document.getElementById('titleInput').value,subtitle=document.getElementById('subtitleInput').value,msg=document.getElementById('messageInput').value;ctx.font='bold 72px Arial';ctx.textAlign='center';ctx.textBaseline='middle';const tw=ctx.measureText(title).width;ctx.fillStyle=col.hw+'15';ctx.fillRect(w/2-tw/2-40,h-340,tw+80,100);ctx.fillStyle=col.hw;ctx.fillText(title,w/2,h-290);ctx.font='36px Arial';const sw=ctx.measureText(subtitle).width;ctx.fillStyle=col.hw+'15';ctx.fillRect(w/2-sw/2-30,h-220,sw+60,70);ctx.fillStyle=col.rd;ctx.fillText(subtitle,w/2,h-185);if(msg){ctx.font='italic 28px Georgia';const mw=ctx.measureText(msg).width;ctx.fillStyle=col.hw+'10';ctx.fillRect(w/2-mw/2-25,h-130,mw+50,50);ctx.fillStyle=col.rd;ctx.fillText(msg,w/2,h-105)}ctx.strokeStyle=col.hw;ctx.lineWidth=6;ctx.strokeRect(40,40,w-80,h-80)}function exportPoster(fmt){const c=document.getElementById('posterCanvas'),l=document.createElement('a');l.download=`poster_${Date.now()}.${fmt}`;l.href=c.toDataURL(`image/${fmt}`,1);l.click()}fetchMapData(state.loc.lat,state.loc.lon)</script></body></html>
