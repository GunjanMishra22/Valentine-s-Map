<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zodiac Constellation Poster Generator</title>

<style>
body{
  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Arial;
  margin:0;background:#f5f5f5;
}
.container{max-width:1300px;margin:auto;padding:20px;}
.grid{display:grid;grid-template-columns:360px 1fr;gap:18px;}
.panel{background:#fff;border-radius:12px;padding:18px;
box-shadow:0 2px 8px rgba(0,0,0,.08);}
h2{margin-bottom:10px;font-size:18px}
input,select{
  width:100%;padding:10px;border-radius:8px;
  border:1px solid #ddd;font-size:14px
}
.btn{padding:10px;border-radius:8px;
border:2px solid #ddd;background:#fff;cursor:pointer}
.btn.active{border-color:#2563eb;background:#eff6ff}
.small-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.export-btn{padding:12px;border-radius:8px;border:none;
background:#2563eb;color:#fff;font-weight:600;width:100%;cursor:pointer}
.canvas-box{background:#fff;border-radius:12px;
padding:20px;display:flex;justify-content:center}
#poster{border:1px solid #ddd;border-radius:8px}
</style>
</head>

<body>

<div class="container">
<h1>Zodiac Constellation Poster Generator</h1>

<div class="grid">

<!-- Controls -->
<div>

<div class="panel">
<h2>Poster Mode</h2>
<div class="small-row">
<button class="btn active" onclick="setZodiacMode('single')" id="mSingle">Single</button>
<button class="btn" onclick="setZodiacMode('couple')" id="mCouple">Couple</button>
</div>
</div>

<div class="panel">
<h2>Person A</h2>

<div class="form-group">
<label>Name</label>
<input id="nameA" value="Person A" oninput="drawPoster()">
</div>

<div class="form-group">
<label>Birthdate</label>
<input type="date" id="dobA" onchange="updateZodiacFromDate('A')">
</div>

<div class="form-group">
<label>Zodiac Sign</label>
<select id="zodiacA" onchange="drawPoster()">
</select>
</div>
</div>

<div class="panel" id="panelB" style="display:none">
<h2>Person B</h2>

<div class="form-group">
<label>Name</label>
<input id="nameB" value="Person B" oninput="drawPoster()">
</div>

<div class="form-group">
<label>Birthdate</label>
<input type="date" id="dobB" onchange="updateZodiacFromDate('B')">
</div>

<div class="form-group">
<label>Zodiac Sign</label>
<select id="zodiacB" onchange="drawPoster()">
</select>
</div>
</div>

<div class="panel">
<h2>Export</h2>
<button class="export-btn" onclick="downloadPNG()">Download PNG</button>
</div>

</div>

<!-- Canvas -->
<div class="canvas-box">
<canvas id="poster" width="2480" height="3508"></canvas>
</div>

</div>
</div>

<script>
/* -----------------------------
   Zodiac Data (Accurate Mapping)
----------------------------- */
const zodiacRanges = [
{sign:"Aries",from:"03-21",to:"04-19"},
{sign:"Taurus",from:"04-20",to:"05-20"},
{sign:"Gemini",from:"05-21",to:"06-20"},
{sign:"Cancer",from:"06-21",to:"07-22"},
{sign:"Leo",from:"07-23",to:"08-22"},
{sign:"Virgo",from:"08-23",to:"09-22"},
{sign:"Libra",from:"09-23",to:"10-22"},
{sign:"Scorpio",from:"10-23",to:"11-21"},
{sign:"Sagittarius",from:"11-22",to:"12-21"},
{sign:"Capricorn",from:"12-22",to:"01-19"},
{sign:"Aquarius",from:"01-20",to:"02-18"},
{sign:"Pisces",from:"02-19",to:"03-20"}
];

function populateZodiacDropdown(select){
  zodiacRanges.forEach(z=> {
    const opt=document.createElement("option");
    opt.value=z.sign;opt.textContent=z.sign;
    select.appendChild(opt);
  });
}
populateZodiacDropdown(zodiacA);
populateZodiacDropdown(zodiacB);

/* -----------------------------
   Mode Switching
----------------------------- */
let zodiacMode="single";

function setZodiacMode(mode){
  zodiacMode=mode;
  mSingle.classList.toggle("active",mode==="single");
  mCouple.classList.toggle("active",mode==="couple");
  panelB.style.display = mode==="couple" ? "block":"none";
  drawPoster();
}

/* -----------------------------
   Zodiac From Birthdate
----------------------------- */
function detectZodiac(dateStr){
  if(!dateStr) return "";
  const md = dateStr.slice(5);

  for(const z of zodiacRanges){
    if(z.from <= z.to){
      if(md >= z.from && md <= z.to) return z.sign;
    } else {
      // Capricorn date wrapping across year
      if(md >= z.from || md <= z.to) return z.sign;
    }
  }
  return "";
}

function updateZodiacFromDate(person){
  const dob = person==="A" ? dobA.value : dobB.value;
  const sign = detectZodiac(dob);
  if(person==="A") zodiacA.value = sign;
  if(person==="B") zodiacB.value = sign;
  drawPoster();
}

/* -----------------------------
   Basic Constellation Shapes
   (Open-source placeholders.
    Replace later with real star paths)
----------------------------- */
const constellationShapes = {
  Aries: [[0,-40],[30,-10],[60,-30]],
  Taurus: [[-40,0],[-10,-20],[20,10],[40,-5]],
  Gemini: [[-20,-40],[-20,20],[20,-40],[20,20]],
  Cancer: [[-40,0],[-10,10],[20,-10],[40,0]],
  Leo: [[-40,-20],[-10,-40],[10,0],[40,20]],
  Virgo: [[-40,20],[-10,0],[20,-20],[40,0]],
  Libra: [[-40,-10],[-10,-10],[10,10],[40,10]],
  Scorpio: [[-40,30],[-10,10],[10,-10],[40,-30]],
  Sagittarius: [[-40,-30],[-10,0],[20,20],[40,0]],
  Capricorn: [[-40,10],[-10,-10],[20,-30],[40,-10]],
  Aquarius: [[-40,-20],[-10,0],[20,0],[40,20]],
  Pisces: [[-40,-10],[-10,10],[10,-10],[40,10]]
};

/* -----------------------------
   Drawing Engine
----------------------------- */
const canvas = document.getElementById("poster");
const ctx = canvas.getContext("2d");

function drawConstellation(sign, centerX, centerY, label){
  const shape = constellationShapes[sign];
  if(!shape) return;

  ctx.lineWidth = 3;
  ctx.strokeStyle="#111";
  ctx.fillStyle="#111";

  ctx.beginPath();
  shape.forEach((p,i)=>{
    const x=centerX+p[0]*6;
    const y=centerY+p[1]*6;
    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
    ctx.beginPath();
    ctx.arc(x,y,8,0,Math.PI*2);
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(centerX+p[0]*6,centerY+p[1]*6);
  });
  ctx.stroke();

  ctx.font="64px serif";
  ctx.textAlign="center";
  ctx.fillText(label,centerX,centerY+260);
}

function drawPoster(){
  ctx.fillStyle="#ffffff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#111";
  ctx.textAlign="center";

  ctx.font="96px serif";
  ctx.fillText("ZODIAC POSTER",canvas.width/2,260);

  if(zodiacMode==="single"){
    const name = nameA.value || "Unknown";
    const sign = zodiacA.value;

    drawConstellation(sign, canvas.width/2, canvas.height/2, `${name} — ${sign}`);
  }

  if(zodiacMode==="couple"){
    const name1 = nameA.value || "Person A";
    const sign1 = zodiacA.value;

    const name2 = nameB.value || "Person B";
    const sign2 = zodiacB.value;

    drawConstellation(sign1, canvas.width/2-500, canvas.height/2, `${name1} — ${sign1}`);
    drawConstellation(sign2, canvas.width/2+500, canvas.height/2, `${name2} — ${sign2}`);
  }
}

/* -----------------------------
   Export
----------------------------- */
function downloadPNG(){
  const link=document.createElement("a");
  link.download="zodiac_poster.png";
  link.href=canvas.toDataURL("image/png");
  link.click();
}

drawPoster();
</script>

</body>
</html>
