<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Premium Poster Generator</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Arial,sans-serif;background:#f8f9fa;color:#2c3e50}.header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:30px 20px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.15)}.header h1{font-size:32px;margin-bottom:8px;font-weight:700}.header p{font-size:16px;opacity:.95}.container{max-width:1600px;margin:0 auto;padding:30px 20px}.grid{display:grid;grid-template-columns:380px 1fr;gap:30px}.panel{background:#fff;border-radius:16px;padding:28px;box-shadow:0 2px 12px rgba(0,0,0,.08);margin-bottom:24px}.panel h2{font-size:20px;margin-bottom:20px;color:#2c3e50;font-weight:600;border-bottom:2px solid #e9ecef;padding-bottom:12px}.btn-group{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.btn{padding:14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;transition:all .3s;font-size:13px;text-align:center;font-weight:500}.btn:hover{border-color:#667eea;transform:translateY(-2px);box-shadow:0 4px 8px rgba(102,126,234,.2)}.btn.active{border-color:#667eea;background:linear-gradient(135deg,#667eea15,#764ba215);color:#667eea;font-weight:600}.form-group{margin-bottom:18px}.form-group label{display:block;font-size:14px;font-weight:600;margin-bottom:10px;color:#495057}.form-group input,.form-group select{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;transition:all .3s}.form-group input:focus,.form-group select:focus{outline:0;border-color:#667eea;box-shadow:0 0 0 4px rgba(102,126,234,.1)}.theme-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.export-btn{width:100%;padding:16px;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;margin-bottom:10px;transition:all .3s}.export-btn.primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.export-btn.primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.4)}.export-btn.secondary{background:#6c757d;color:#fff}.export-btn.secondary:hover{background:#5a6268}.canvas-container{background:#fff;border-radius:16px;padding:30px;box-shadow:0 2px 12px rgba(0,0,0,.08);display:flex;justify-content:center;align-items:center}#posterCanvas{max-width:100%;height:auto;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.12)}@media(max-width:1200px){.grid{grid-template-columns:1fr}}</style></head><body><div class="header"><h1>‚ú® Premium Poster Generator</h1><p>Create stunning map, star map, and typography posters</p></div><div class="container"><div class="grid"><div><div class="panel"><h2>üé® Poster Type</h2><div class="btn-group"><button class="btn active"onclick="setPosterType('map')"id="btn-map">üó∫Ô∏è<br>Map</button><button class="btn"onclick="setPosterType('star')"id="btn-star">‚≠ê<br>Stars</button><button class="btn"onclick="setPosterType('text')"id="btn-text">üìù<br>Text</button></div></div><div class="panel"><h2>üìç Location</h2><button class="export-btn primary"onclick="useMyLocation()"id="gpsBtn">üìç Use My GPS</button><div style="text-align:center;margin:16px 0;color:#868e96;font-size:13px;font-weight:500">‚Äî OR ‚Äî</div><div class="form-group"><label>Search Location</label><input type="text"id="locationSearch"placeholder="Enter city..."oninput="handleLocationInput()"><div id="locationSuggestions"style="display:none;max-height:240px;overflow-y:auto;border:2px solid #e0e0e0;border-radius:10px;margin-top:10px;background:#fff"></div></div><div id="currentLocationDisplay"style="background:linear-gradient(135deg,#667eea15,#764ba215);padding:16px;border-radius:10px;margin-top:16px;font-size:13px;display:none;border:2px solid #667eea30"><strong style="color:#667eea">Current:</strong><br><span id="locationDisplayText"style="color:#495057"></span></div><div id="starControls"style="display:none;margin-top:20px"><div class="form-group"><label>üìÖ Date</label><input type="date"id="dateInput"value="2024-01-01"onchange="drawPoster()"></div><div class="form-group"><label>‚è∞ Time</label><input type="time"id="timeInput"value="20:00"onchange="drawPoster()"></div></div><div id="mapControls"style="margin-top:20px"><div class="form-group"><label>üîç Zoom</label><input type="range"id="zoomInput"min="1"max="5"value="3"step="0.5"oninput="updateZoom()"><div style="text-align:center;margin-top:8px;font-size:13px;color:#6c757d">Level: <span id="zoomValue">3.0</span>x</div></div></div></div><div class="panel"><h2>‚úèÔ∏è Text</h2><div class="form-group"><label>Title</label><input type="text"id="titleInput"value="NEW YORK"oninput="drawPoster()"></div><div class="form-group"><label>Subtitle</label><input type="text"id="subtitleInput"value="40.7128¬∞ N, 74.0060¬∞ W"oninput="drawPoster()"></div><div class="form-group"><label>Tagline</label><input type="text"id="messageInput"placeholder="Optional..."oninput="drawPoster()"></div></div><div class="panel"><h2>üé® Theme</h2><div class="theme-grid"><button class="btn active"onclick="setTheme('classic')"id="theme-classic">Classic</button><button class="btn"onclick="setTheme('modern')"id="theme-modern">Modern</button><button class="btn"onclick="setTheme('vintage')"id="theme-vintage">Vintage</button><button class="btn"onclick="setTheme('minimal')"id="theme-minimal">Minimal</button><button class="btn"onclick="setTheme('nightsky')"id="theme-nightsky">Night Sky</button><button class="btn"onclick="setTheme('cyberpunk')"id="theme-cyberpunk">Cyberpunk</button></div></div><div class="panel"><h2>üé® Custom</h2><div class="form-group"><label>Background</label><input type="color"id="bgColor"style="height:50px"onchange="applyCustomColors()"></div><div class="form-group"><label>Primary</label><input type="color"id="fgColor"style="height:50px"onchange="applyCustomColors()"></div></div><div class="panel"><h2>üíæ Export</h2><button class="export-btn primary"onclick="exportPoster('png')">‚¨áÔ∏è Download PNG</button><button class="export-btn secondary"onclick="exportPoster('jpeg')">‚¨áÔ∏è Download JPEG</button></div></div><div><div class="canvas-container"><canvas id="posterCanvas"width="2480"height="3508"></canvas></div></div></div></div><script>const brightStars=[{name:'Sirius',ra:6.75,dec:-16.72,mag:-1.46},{name:'Canopus',ra:6.4,dec:-52.7,mag:-.72},{name:'Arcturus',ra:14.26,dec:19.18,mag:-.05},{name:'Vega',ra:18.62,dec:38.78,mag:.03},{name:'Capella',ra:5.28,dec:45.99,mag:.08},{name:'Rigel',ra:5.24,dec:-8.2,mag:.12},{name:'Procyon',ra:7.66,dec:5.23,mag:.38},{name:'Betelgeuse',ra:5.92,dec:7.41,mag:.5},{name:'Altair',ra:19.85,dec:8.87,mag:.77},{name:'Aldebaran',ra:4.6,dec:16.51,mag:.85},{name:'Spica',ra:13.42,dec:-11.16,mag:.98},{name:'Antares',ra:16.49,dec:-26.43,mag:1.06},{name:'Pollux',ra:7.76,dec:28.03,mag:1.14},{name:'Deneb',ra:20.69,dec:45.28,mag:1.25}];let state={posterType:'map',theme:'classic',zoom:3,customLocation:{lat:40.7128,lon:-74.006,name:'New York'},mapData:null,customBg:null,customFg:null};const themes={classic:{bg:'#FFFFFF',street:'#D4D4D4',road:'#999999',highway:'#666666',water:'#B8D4E8',railway:'#888888',natural:'#E8F4E8'},modern:{bg:'#F8F9FA',street:'#C7D0DA',road:'#8B95A8',highway:'#4A5568',water:'#A5C9E8',railway:'#6B7280',natural:'#D4E7D4'},vintage:{bg:'#F4E8D8',street:'#D4C4AC',road:'#A6906E',highway:'#6B5D47',water:'#B8C8D8',railway:'#8B7355',natural:'#E0D4C0'},minimal:{bg:'#FAFAFA',street:'#E0E0E0',road:'#B0B0B0',highway:'#707070',water:'#C8D8E8',railway:'#909090',natural:'#E8E8E8'},nightsky:{bg:'#0A1128',street:'#2A3A5C',road:'#3D5070',highway:'#5C6BC0',water:'#1A3A5C',railway:'#4A5A7C',natural:'#1A2840'},cyberpunk:{bg:'#0D0221',street:'#2D1B4E',road:'#4A2D6E',highway:'#00FFF5',water:'#1A0D3E',railway:'#FF006E',natural:'#1D0D31'}};let locTimeout;async function fetchMapData(lat,lon){try{const r=state.zoom*.018,b=`${lat-r},${lon-r},${lat+r},${lon+r}`,q=`[out:json][timeout:30];(way["highway"](${b});way["waterway"](${b});way["railway"](${b});way["natural"~"water|coastline|beach|cliff|peak|wood|tree_row"](${b}););out geom;`,res=await fetch(`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(q)}`),d=await res.json();state.mapData={lat,lon,elements:d.elements.filter(e=>e.geometry&&e.geometry.length>1)};drawPoster()}catch(e){console.error(e);state.mapData=null;drawPoster()}}function updateZoom(){state.zoom=parseFloat(document.getElementById('zoomInput').value);document.getElementById('zoomValue').textContent=state.zoom.toFixed(1);if(state.customLocation)fetchMapData(state.customLocation.lat,state.customLocation.lon)}function useMyLocation(){const btn=document.getElementById('gpsBtn');if(!btn)return;btn.disabled=true;btn.textContent='üìç Getting location...';if(!navigator.geolocation){alert('GPS not supported by your browser');btn.disabled=false;btn.textContent='üìç Use My GPS';return}const options={enableHighAccuracy:true,timeout:10000,maximumAge:0};navigator.geolocation.getCurrentPosition(function(position){const lat=position.coords.latitude;const lon=position.coords.longitude;btn.textContent='‚úÖ Location found!';fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r=>r.json()).then(data=>{const n=data.address.city||data.address.town||data.address.village||data.address.county||'Your Location';state.customLocation={lat:lat,lon:lon,name:n};updateLocationDisplay(n,lat,lon);document.getElementById('titleInput').value=n.toUpperCase();document.getElementById('subtitleInput').value=`${lat.toFixed(4)}¬∞ ${lat>0?'N':'S'}, ${Math.abs(lon).toFixed(4)}¬∞ ${lon>0?'E':'W'}`;fetchMapData(lat,lon)}).catch(err=>{console.error('Reverse geocoding error:',err);state.customLocation={lat:lat,lon:lon,name:'Your Location'};updateLocationDisplay('Your Location',lat,lon);fetchMapData(lat,lon)});setTimeout(function(){btn.disabled=false;btn.textContent='üìç Use My GPS'},3000)},function(error){btn.disabled=false;btn.textContent='üìç Use My GPS';let msg='Could not get location. ';if(error.code===1)msg+='Permission denied.';else if(error.code===2)msg+='Position unavailable.';else if(error.code===3)msg+='Timeout.';alert(msg)},options)}function updateLocationDisplay(n,lat,lon){document.getElementById('locationDisplayText').innerHTML=`<strong>${n}</strong><br>${lat.toFixed(4)}¬∞, ${lon.toFixed(4)}¬∞`;document.getElementById('currentLocationDisplay').style.display='block'}async function handleLocationInput(){const q=document.getElementById('locationSearch').value.trim();if(q.length<3){document.getElementById('locationSuggestions').style.display='none';return}clearTimeout(locTimeout);locTimeout=setTimeout(async()=>{try{const r=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(q)}&format=json&limit=6`),res=await r.json();if(res.length>0)displayLocationSuggestions(res)}catch(e){console.error(e)}},400)}function displayLocationSuggestions(results){const c=document.getElementById('locationSuggestions');c.innerHTML='';c.style.display='block';results.forEach(r=>{const d=document.createElement('div');d.style.padding='14px';d.style.cursor='pointer';d.style.borderBottom='1px solid #f0f0f0';d.style.fontSize='13px';d.textContent=r.display_name;d.onmouseover=()=>d.style.background='#f8f9fa';d.onmouseout=()=>d.style.background='white';d.onclick=()=>selectLocation(r);c.appendChild(d)})}function selectLocation(loc){state.customLocation={lat:parseFloat(loc.lat),lon:parseFloat(loc.lon),name:loc.display_name.split(',')[0]};document.getElementById('locationSearch').value=loc.display_name;document.getElementById('locationSuggestions').style.display='none';updateLocationDisplay(state.customLocation.name,state.customLocation.lat,state.customLocation.lon);document.getElementById('titleInput').value=state.customLocation.name.toUpperCase();document.getElementById('subtitleInput').value=`${state.customLocation.lat.toFixed(4)}¬∞, ${state.customLocation.lon.toFixed(4)}¬∞`;fetchMapData(state.customLocation.lat,state.customLocation.lon)}function setPosterType(t){state.posterType=t;document.querySelectorAll('.btn-group .btn').forEach(b=>b.classList.remove('active'));document.getElementById(`btn-${t}`).classList.add('active');document.getElementById('starControls').style.display=t==='star'?'block':'none';document.getElementById('mapControls').style.display=t==='map'?'block':'none';drawPoster()}function setTheme(t){state.theme=t;state.customBg=null;state.customFg=null;document.querySelectorAll('.theme-grid .btn').forEach(b=>b.classList.remove('active'));document.getElementById(`theme-${t}`).classList.add('active');const col=themes[t];document.getElementById('bgColor').value=col.bg;document.getElementById('fgColor').value=col.street;drawPoster()}function applyCustomColors(){state.customBg=document.getElementById('bgColor').value;state.customFg=document.getElementById('fgColor').value;drawPoster()}function drawPoster(){const c=document.getElementById('posterCanvas'),ctx=c.getContext('2d'),w=c.width,h=c.height;let col={...themes[state.theme]};if(state.customBg)col.bg=state.customBg;ctx.fillStyle=col.bg;ctx.fillRect(0,0,w,h);if(state.posterType==='map')drawMapPoster(ctx,w,h,col);else if(state.posterType==='star')drawStarPoster(ctx,w,h,col);else drawTypographyPoster(ctx,w,h,col)}function drawMapPoster(ctx,w,h,col){const cx=w/2,cy=h*.4;if(state.mapData&&state.mapData.elements.length>0){const loc=state.customLocation,ms=12e4*state.zoom;ctx.save();ctx.translate(cx,cy);const layers=[{tag:'natural',color:col.natural,width:3},{tag:'waterway',color:col.water,width:2.5},{tag:'railway',color:col.railway,width:1.8},{tag:'highway',types:['residential','unclassified','service'],color:col.street,width:1.2},{tag:'highway',types:['tertiary','secondary','primary'],color:col.road,width:2},{tag:'highway',types:['trunk','motorway'],color:col.highway,width:3}];layers.forEach(layer=>{state.mapData.elements.forEach(e=>{if(!e.geometry||e.geometry.length<2||!e.tags)return;if(layer.tag==='highway'&&e.tags.highway){if(layer.types&&!layer.types.includes(e.tags.highway))return;ctx.strokeStyle=layer.color;ctx.lineWidth=layer.width;ctx.lineCap='round';ctx.lineJoin='round';ctx.beginPath();e.geometry.forEach((c,i)=>{const x=(c.lon-loc.lon)*ms*Math.cos(loc.lat*Math.PI/180),y=-(c.lat-loc.lat)*ms;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y)});ctx.stroke()}else if(e.tags[layer.tag]){ctx.strokeStyle=layer.color;ctx.lineWidth=layer.width;ctx.lineCap='round';ctx.lineJoin='round';if(layer.tag==='waterway')ctx.globalAlpha=.7;ctx.beginPath();e.geometry.forEach((c,i)=>{const x=(c.lon-loc.lon)*ms*Math.cos(loc.lat*Math.PI/180),y=-(c.lat-loc.lat)*ms;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y)});ctx.stroke();ctx.globalAlpha=1}})});const grad=ctx.createRadialGradient(0,0,10,0,0,35);grad.addColorStop(0,'#FFFFFF');grad.addColorStop(.5,col.highway);grad.addColorStop(1,col.bg);ctx.fillStyle=grad;ctx.beginPath();ctx.arc(0,0,35,0,Math.PI*2);ctx.fill();ctx.fillStyle=col.highway;ctx.beginPath();ctx.arc(0,0,15,0,Math.PI*2);ctx.fill();ctx.restore()}else{ctx.fillStyle=col.highway||'#666';ctx.textAlign='center';ctx.font='bold 38px Arial';ctx.fillText('Loading map...',cx,cy)}drawPosterLabels(ctx,w,h,col)}function drawStarPoster(ctx,w,h,col){const loc=state.customLocation,date=new Date(`${document.getElementById('dateInput').value}T${document.getElementById('timeInput').value}:00`);const grad=ctx.createLinearGradient(0,0,0,h*.65);grad.addColorStop(0,'#000814');grad.addColorStop(.3,'#001233');grad.addColorStop(.7,'#001845');grad.addColorStop(1,col.bg);ctx.fillStyle=grad;ctx.fillRect(0,0,w,h*.65);for(let i=0;i<2500;i++){const x=Math.random()*w,y=Math.random()*h*.65,dist=Math.sqrt((x-w/2)**2+(y-h*.2)**2),tier=Math.random();let sz,alpha;if(dist<400&&tier<.15){sz=.8+Math.random()*.6;alpha=.85+Math.random()*.15}else if(tier<.08){sz=.6+Math.random()*.5;alpha=.7+Math.random()*.2}else if(tier<.25){sz=.4+Math.random()*.4;alpha=.5+Math.random()*.25}else{sz=.2+Math.random()*.3;alpha=.25+Math.random()*.3}const twinkle=Math.sin(Date.now()*.001+i)*.15+.85;ctx.fillStyle=`rgba(${tier<.1?'230,240,255':'255,255,255'},${alpha*twinkle})`;ctx.beginPath();ctx.arc(x,y,sz,0,Math.PI*2);ctx.fill()}const stars=calculateStarPositions(loc.lat,loc.lon,date,w,h);ctx.strokeStyle='rgba(140,160,200,0.15)';ctx.lineWidth=1.2;const vis=stars.filter(s=>s.x>=0&&s.x<=w&&s.y>=0&&s.y<=h*.65);for(let i=0;i<vis.length;i++){for(let j=i+1;j<vis.length;j++){const s1=vis[i],s2=vis[j],d=Math.sqrt((s1.x-s2.x)**2+(s1.y-s2.y)**2);if(d<450&&s1.mag<1&&s2.mag<1){ctx.globalAlpha=.3;ctx.beginPath();ctx.moveTo(s1.x,s1.y);ctx.lineTo(s2.x,s2.y);ctx.stroke();ctx.globalAlpha=1}}}stars.forEach(s=>{if(s.x>=20&&s.x<=w-20&&s.y>=20&&s.y<=h*.65-20){const sz=Math.max(3,10-s.mag*2.5);const halo=sz*8;const g=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,halo);g.addColorStop(0,'rgba(255,255,255,0.95)');g.addColorStop(.1,'rgba(240,245,255,0.6)');g.addColorStop(.3,'rgba(200,220,255,0.25)');g.addColorStop(.6,'rgba(180,200,240,0.08)');g.addColorStop(1,'rgba(160,180,220,0)');ctx.fillStyle=g;ctx.beginPath();ctx.arc(s.x,s.y,halo,0,Math.PI*2);ctx.fill();ctx.fillStyle='#FFFFFF';ctx.shadowBlur=8;ctx.shadowColor='rgba(255,255,255,0.8)';ctx.beginPath();ctx.arc(s.x,s.y,sz,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;if(s.mag<.4&&s.name){ctx.fillStyle='rgba(255,255,255,0.9)';ctx.font='bold 26px Arial';ctx.textAlign='center';ctx.shadowBlur=4;ctx.shadowColor='rgba(0,0,0,0.5)';ctx.fillText(s.name,s.x,s.y-halo-8);ctx.shadowBlur=0}}});drawPosterLabels(ctx,w,h,col)}function calculateStarPositions(lat,lon,date,cw,ch){const jd=date.getTime()/864e5+2440587.5;let theta=280.46061837+360.98564736629*(jd-2451545);theta=theta%360;if(theta<0)theta+=360;const lst=(theta+lon)%360/15,pos=[];brightStars.forEach(s=>{const ha=lst-s.ra,har=ha*15*Math.PI/180,decr=s.dec*Math.PI/180,latr=lat*Math.PI/180,sinAlt=Math.sin(decr)*Math.sin(latr)+Math.cos(decr)*Math.cos(latr)*Math.cos(har),alt=Math.asin(sinAlt)*180/Math.PI;if(alt>-5){const altr=alt*Math.PI/180,cosAz=(Math.sin(decr)-Math.sin(altr)*Math.sin(latr))/(Math.cos(altr)*Math.cos(latr));let az=Math.acos(Math.max(-1,Math.min(1,cosAz)))*180/Math.PI;if(Math.sin(har)>0)az=360-az;const ps=ch*.28,r=ps*(90-alt)/90,th=az*Math.PI/180;pos.push({x:cw/2+r*Math.sin(th),y:ch*.28-r*Math.cos(th),mag:s.mag,name:s.name})}});return pos}function drawTypographyPoster(ctx,w,h,col){const title=document.getElementById('titleInput').value,subtitle=document.getElementById('subtitleInput').value;ctx.strokeStyle=col.highway||col.road||'#666';ctx.lineWidth=2.5;for(let i=0;i<9;i++){const offs=i*90;ctx.strokeRect(100+offs,100+offs,w-200-offs*2,h-200-offs*2)}ctx.font='bold 180px Arial';ctx.textAlign='center';ctx.textBaseline='middle';const titleWidth=ctx.measureText(title).width;ctx.fillStyle=(col.highway||col.road||'#666')+'15';ctx.fillRect(w/2-titleWidth/2-50,h/2-140,titleWidth+100,200);ctx.fillStyle=col.highway||col.road||'#000';ctx.fillText(title,w/2,h/2-80);ctx.font='60px Arial';const subWidth=ctx.measureText(subtitle).width;ctx.fillStyle=(col.highway||col.road||'#666')+'15';ctx.fillRect(w/2-subWidth/2-40,h/2+40,subWidth+80,100);ctx.fillStyle=col.road||col.street||'#666';ctx.fillText(subtitle,w/2,h/2+90);drawPosterLabels(ctx,w,h,col)}function drawPosterLabels(ctx,w,h,col){const title=document.getElementById('titleInput').value,subtitle=document.getElementById('subtitleInput').value,msg=document.getElementById('messageInput').value;ctx.font='bold 72px Arial';ctx.textAlign='center';ctx.textBaseline='middle';const titleWidth=ctx.measureText(title).width;ctx.fillStyle=(col.highway||col.road||'#666')+'15';ctx.fillRect(w/2-titleWidth/2-40,h-340,titleWidth+80,100);ctx.fillStyle=col.highway||col.road||'#000';ctx.fillText(title,w/2,h-290);ctx.font='36px Arial';const subWidth=ctx.measureText(subtitle).width;ctx.fillStyle=(col.highway||col.road||'#666')+'15';ctx.fillRect(w/2-subWidth/2-30,h-220,subWidth+60,70);ctx.fillStyle=col.road||col.street||'#666';ctx.fillText(subtitle,w/2,h-185);if(msg){ctx.font='italic 28px Georgia';const msgWidth=ctx.measureText(msg).width;ctx.fillStyle=(col.highway||col.road||'#666')+'10';ctx.fillRect(w/2-msgWidth/2-25,h-130,msgWidth+50,50);ctx.fillStyle=col.road||col.street||'#666';ctx.fillText(msg,w/2,h-105)}ctx.strokeStyle=col.highway||col.road||'#666';ctx.lineWidth=6;ctx.strokeRect(40,40,w-80,h-80)}function exportPoster(fmt){const c=document.getElementById('posterCanvas'),l=document.createElement('a');l.download=`poster_${Date.now()}.${fmt}`;l.href=c.toDataURL(`image/${fmt}`,1);l.click()}fetchMapData(state.customLocation.lat,state.customLocation.lon)</script></body></html>
